<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core">

    <h:panelGroup id="pgNFeProdutoServicoIdentificacao">
        <div class="ui-g-12 "><span class="Blue Fs17">Utilize o campo 'Código' para buscar um produto ja cadastrado digitando seu código ou descrição.</span></div>
        <p:spacer width="10ex"/>

        <div class="ui-g">
            <div class="ui-g-12 ui-md-4 ui-lg-4">
                <h:panelGroup styleClass="md-inputfield">
                    <p:autoComplete id="cprod" completeMethod="#{digitacaoNFeFaces.completeProduto}" 
                                    value="#{digitacaoNFeFaces.produto}" var="acProduto" itemValue="#{acProduto}" itemLabel="#{acProduto.cprod}" 
                                    maxlength="60" minQueryLength="4" emptyMessage="Nenhum produto encontrado." style="color: #00aaff" converter="entityConverter">
                        <p:column width="30%" headerText="Código" style="height: 4em">#{acProduto.cprod.length() gt 15 ? acProduto.cprod.substring(0, 12).concat('...') : acProduto.cprod}</p:column>
                        <p:column width="60%" headerText="Descrição" style="height: 4em">#{acProduto.xprod.length() gt 30 ? acProduto.xprod.substring(0, 27).concat('...') : acProduto.xprod}</p:column>
                        <p:column width="10%" headerText="UN" style="height: 4em; text-align: center">#{acProduto.ucom.toUpperCase()}</p:column>
                        <p:ajax event="itemSelect" listener="#{digitacaoNFeFaces.onProdutoSelect}" update="pgNFeProdutoServicoIdentificacao"/>
                    </p:autoComplete>
                    <label>* Código</label>
                    <p:message for="cprod" escape="true" />
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-8 ui-lg-8">
                <h:panelGroup styleClass="md-inputfield">
                    <p:inputText id="xprod" value="#{digitacaoNFeFaces.produtoServico.xprod}" maxlength="60" />
                    <label>* Descrição</label>
                    <p:message for="xprod" escape="true"/>
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-12 ui-lg-6" >
                <h:panelGroup styleClass="md-inputfield">
                    <p:autoComplete id="cfop" value="#{digitacaoNFeFaces.produtoServico.cfop}" var="vCfop" itemValue="#{vCfop}" itemLabel="#{vCfop}" cache="true" cacheTimeout="360000"
                                    completeMethod="#{digitacaoNFeFaces.completeCFOP}" dropdown="true" dropdownMode="currency"/>
                    <label>* CFOP</label>
                    <p:message for="cfop" escape="true"/>
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-12 ui-lg-6" >
                <h:panelGroup styleClass="md-inputfield">
                    <p:autoComplete id="ncm" value="#{digitacaoNFeFaces.produtoServico.ncm}" var="vNcm" itemValue="#{vNcm}" itemLabel="#{vNcm}" cache="true"
                                    completeMethod="#{digitacaoNFeFaces.completeNCM}" dropdown="true" dropdownMode="currency"/>
                    <label>* NCM</label>
                    <p:message for="ncm" escape="true"/>
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-12 ui-lg-6" >
                <h:panelGroup styleClass="md-inputfield">
                    <p:autoComplete id="cest" value="#{digitacaoNFeFaces.produtoServico.cest}" var="vCest" itemValue="#{vCest}" itemLabel="#{vCest}" cache="true"
                                    completeMethod="#{digitacaoNFeFaces.completeCEST}" dropdown="true" dropdownMode="currency"/>
                    <label>CEST</label>
                    <p:message for="cest" escape="true"/>
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-12 ui-lg-6" >
                <h:panelGroup styleClass="md-inputfield">
                    <p:autoComplete id="indTot" value="#{digitacaoNFeFaces.produtoServico.indtot}" var="vIndProd" itemValue="#{vIndProd}" itemLabel="#{vIndProd.codigo.concat(' - ').concat(vIndProd.descricao)}" cache="true"
                                    completeMethod="#{digitacaoNFeFaces.completeIndicadorVProd}" dropdown="true" />
                    <label>* Composição do Item</label>
                    <p:message for="indTot" escape="true"/>
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
                <h:panelGroup styleClass="md-inputfield">
                    <p:inputText id="ean" value="#{digitacaoNFeFaces.produtoServico.cean}" maxlength="14" />
                    <label>* EAN</label>
                    <p:message for="ean" escape="true"/>
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
                <h:panelGroup styleClass="md-inputfield">
                    <p:inputText id="ceantrib" value="#{digitacaoNFeFaces.produtoServico.ceantrib}" maxlength="14" />
                    <label>* EAN Tributável</label>
                    <p:message for="ceantrib" escape="true"/>
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
                <h:panelGroup styleClass="md-inputfield">
                    <p:inputText id="ucom" value="#{digitacaoNFeFaces.produtoServico.ucom}" maxlength="6" />
                    <label>* Unidade Comercial</label>
                    <p:message for="ucom" escape="true"/>
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
                <h:panelGroup styleClass="md-inputfield">
                    <p:inputText id="utrib" value="#{digitacaoNFeFaces.produtoServico.utrib}" maxlength="6" />
                    <label>* Unidade Tributável</label>
                    <p:message for="utrib" escape="true"/>
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
                <h:panelGroup styleClass="md-inputfield">
                    <p:inputText id="extipi" value="#{digitacaoNFeFaces.produtoServico.extipi}" maxlength="3" />
                    <label>EX TIPI</label>
                    <p:message for="extipi" escape="true"/>
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
                <h:panelGroup styleClass="md-inputfield" >
                    <p:inputText id="qcom" value="#{digitacaoNFeFaces.produtoServico.qcom}" maxlength="15" style="background-color: #EAEAEA; text-align: right" >
                        <f:convertNumber type="number" maxFractionDigits="4" minFractionDigits="4" />
                    </p:inputText>
                    <label>* Quantidade Comercial</label>
                    <p:message for="qcom" escape="true"/>
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
                <h:panelGroup styleClass="md-inputfield" >
                    <p:inputText id="vuncom" value="#{digitacaoNFeFaces.produtoServico.vuncom}" maxlength="15" style="background-color: #EAEAEA; text-align: right">
                        <f:convertNumber type="number" maxFractionDigits="4" minFractionDigits="4" />
                    </p:inputText>
                    <label>* Valor Unitário Comercial</label>
                    <p:message for="vuncom" escape="true"/>
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
                <h:panelGroup styleClass="md-inputfield" >
                    <p:inputText id="qtrib" value="#{digitacaoNFeFaces.produtoServico.qtrib}" maxlength="15" style="background-color: #EAEAEA; text-align: right">
                        <f:convertNumber type="number" maxFractionDigits="4" minFractionDigits="4" />
                    </p:inputText>
                    <label>* Quantidade Tributada</label>
                    <p:message for="qtrib" escape="true"/>
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
                <h:panelGroup styleClass="md-inputfield" >
                    <p:inputText id="vuntrib" value="#{digitacaoNFeFaces.produtoServico.vuntrib}" maxlength="15" style="background-color: #EAEAEA; text-align: right">
                        <f:convertNumber type="number" maxFractionDigits="4" minFractionDigits="4" />
                    </p:inputText>
                    <label>* Valor Unitário Tributado</label>
                    <p:message for="vuntrib" escape="true"/>
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
                <h:panelGroup styleClass="md-inputfield" >
                    <p:inputText id="vfrete" value="#{digitacaoNFeFaces.produtoServico.vfrete}" maxlength="15" style="background-color: #EAEAEA; text-align: right">
                        <f:convertNumber type="number" maxFractionDigits="2" minFractionDigits="2" />
                    </p:inputText>
                    <label>Valor do Frete</label>
                    <p:message for="vfrete" escape="true"/>
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
                <h:panelGroup styleClass="md-inputfield" >
                    <p:inputText id="vseg" value="#{digitacaoNFeFaces.produtoServico.vseg}" maxlength="15" style="background-color: #EAEAEA; text-align: right">
                        <f:convertNumber type="number" maxFractionDigits="2" minFractionDigits="2" />
                    </p:inputText>
                    <label>Valor do Seguro</label>
                    <p:message for="vseg" escape="true"/>
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
                <h:panelGroup styleClass="md-inputfield" >
                    <p:inputText id="vdesc" value="#{digitacaoNFeFaces.produtoServico.vdesc}" maxlength="15" style="background-color: #EAEAEA; text-align: right">
                        <f:convertNumber type="number" maxFractionDigits="2" minFractionDigits="2" />
                    </p:inputText>
                    <label>Valor do Desconto</label>
                    <p:message for="vdesc" escape="true"/>
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
                <h:panelGroup styleClass="md-inputfield" >
                    <p:inputText id="voutro" value="#{digitacaoNFeFaces.produtoServico.voutro}" maxlength="15" style="background-color: #EAEAEA; text-align: right">
                        <f:convertNumber type="number" maxFractionDigits="2" minFractionDigits="2" />
                    </p:inputText>
                    <label>Outras Despesas Acessórias</label>
                    <p:message for="voutro" escape="true"/>
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-3" style="padding: 0em">
                <div class="ui-g-10">
                    <h:panelGroup styleClass="md-inputfield" >
                        <p:inputText id="vprod" value="#{digitacaoNFeFaces.produtoServico.vprod}" maxlength="15" style="background-color: #EAEAEA; text-align: right">
                            <f:convertNumber type="number" maxFractionDigits="2" minFractionDigits="2" />
                        </p:inputText>
                        <label>* Valor Total Produto/Serviço</label>
                        <p:message for="vprod" escape="true"/>
                    </h:panelGroup>
                </div>
                <div class="ui-g-2" style="text-align: center; padding: 0em">
                    <p:commandButton process="qcom, vuncom, vfrete, vseg, vdesc, voutro, @this" update="vprod" 
                                     action="#{digitacaoNFeFaces.calculaVProd()}" partialSubmit="true" 
                                     icon="fa fa-refresh" />
                </div>
            </div>
        </div>
        <div class="ui-g">
            <div class="ui-g-12 ui-md-6 ui-lg-3">
                <h:panelGroup styleClass="md-inputfield" >
                    <p:inputText id="xped" value="#{digitacaoNFeFaces.produtoServico.xped}" maxlength="15"/>
                    <label>Pedido de Compra</label>
                    <p:message for="xped" escape="true"/>
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
                <h:panelGroup styleClass="md-inputfield" >
                    <p:inputText id="nitemped" value="#{digitacaoNFeFaces.produtoServico.nitemped}" maxlength="6"/>
                    <label>Nº Item do Pedido de Compra</label>
                    <p:message for="nitemped" escape="true"/>
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
                <h:panelGroup styleClass="md-inputfield" >
                    <p:autoComplete value="#{digitacaoNFeFaces.produtoEspecifico}" var="vEspecifico" itemValue="#{vEspecifico}" itemLabel="#{vEspecifico.descricao}" 
                                    completeMethod="#{digitacaoNFeFaces.completeNFeTipoProdutoEspecifico}" dropdown="true">
                        <p:ajax event="itemSelect" update="tvNFeProdutoServico"/>
                    </p:autoComplete>
                    <label>Produto Específico</label>
                </h:panelGroup>
            </div>
            <div class="ui-g-12 ui-md-6 ui-lg-3">
                <h:panelGroup styleClass="md-inputfield" >
                    <p:inputText id="nfci" value="#{digitacaoNFeFaces.produtoServico.nfci}" maxlength="36"/>
                    <label>Nº de Controle da FCI</label>
                    <p:message for="nfci" escape="true"/>
                </h:panelGroup>
            </div>
        </div>
    </h:panelGroup>

</ui:composition>